<!doctype html>
<html lang="ru">
<head>
	<meta http-equiv=Content-Type content="text/html; charset=utf8">
	<title>ZenComment - юзерстили для сайта Habrahabr</title>
	<link rel="stylesheet" href="../main.css">
	<link rel="stylesheet" href="../viewImage.css">
	<script src="../viewImage.js"></script>
</head>
<body class="forkGithub"><div class=wraprre style="line-height: 1.4; max-width: 900px">

<div class="b-pageTop">
	<div class="" style="float: right;">last update 2014-10-29</div>
	<a class="forkGithub" href="https://github.com/spmbt/haPages/tree/gh-pages" title="Участвовать в разработке на Github.com"></a>
	<h1 class="forkGithub"><a href="https://github.com/spmbt/haPages/tree/gh-pages" title="Участвовать в разработке на Github.com">haPages bay</a></h1>
	<div class="def">Разработки скриптописателя <a href="https://greasyfork.org/ru/users/2323-spmbt" title="скрипты на Greasyfork.org">spmbt</a></div>
</div>

<div style="float: right"><a class="install-button" target="_blank" href="https://userstyles.org/styles/36690/">установить стили ZenComment в браузер<br> <span style="font-weight:normal">(требуется расширение Stylish)</span></a></div>
<a href="https://userstyles.org/styles/36690/" title="описание на Userstyles.org"><h2>Стили Habr ZenComment</h2></a>
<div class="b-h2Block">
	<h3>Юзерстили для модификации вида сайта <a href="http://habrahabr.ru">Habrahabr</a></h3>

<div class="b-h3Block content">
	.<br>
	<i>Имеют ряд свойств, отличных от дизайна оригинального сайта:</i><br>
	<div class="descr">&#9679; <b>незаметное</b> Geektimes-меню: показ по наведению;</div>
	<div class="descr">&#9679; <b>скрытие кнопочной панели</b> навигации (подменю открываются по фиксированным кнопкам в углах);</div>
	<div class="descr">&#9679; <b>адаптивное постоянное</b> меню Geektimes на широких окнах;</div>
	<div class="descr">&#9679; поддерживающий юзерскрипт <a href="index.htm">HabrAjax</a> (расширение функций сайта);</div>
	<div class="descr">&#9679; возможность <b>очень узких окон</b> (часто от 320 пикс.) и адаптивность зазоров, полей от ширины окна;</div>
	<div class="descr">&#9679; <b>изменение размера полей ввода</b> (разблокировано; меняется вручную);</div>
	<div class="descr">&#9679; <b>более компактный</b> правый сайдбар;</div>
	<div class="descr">&#9679; уменьшены: <b>межстрочный интервал, поля, зазоры</b>; компактность - основная идея;</div>
	<div class="descr">&#9679; смягчение последствий двойных переносов строк (насколько возможно в стилях);</div>
	<div class="descr">&#9679; <b>уменьшение размеров</b> заголовков;</div>
	<div class="descr">&#9679; <b>правое форматирование</b> даты, хабов, тегов;</div>
	<div class="descr">&#9679; <b>модификация кнопок"Читать дальше"</b> и других, для незаметности относительно текстов</div>
	<div class="descr">&#9679; <b>контрастный разделитель</b> между статьёй и ответами;</div>
	<div class="descr">&#9679; <b>невидимые аватары</b> в ответах - просматриваются по наведению на кнопку "ответ";</div>
	<div class="descr">&#9679; <b>симметризация кнопок голосования</b> в ответах;</div>
	<div class="descr">&#9679; <b>перенос малозначимых кнопок</b> в ответах вправо и появление их по наведению (сверху слева - только дата и автор);</div>
	<div class="descr">&#9679; <b>деакцентирование кнопок</b> "Пожаловаться";</div>
	<div class="descr">&#9679; <b>скрытие точек уровня ответа</b>;</div>
	<div class="descr">&#9679; <b>линии дерева ответов</b> вместо точек уровня;</div>
	<div class="descr">&#9679; <b>кнопка "ответ" - слева</b> с вертикальным расположением и появляется по наведению на блок ответа;</div>
	<div class="descr">&#9679; <b>ослабление вида сообщений "НЛО"</b> - бледный текст, серый фон, малый шрифт:</div>
	<div class="descr">&#9679; <b>фильтрация нежелательных блоков</b> в сайдбаре и подобных местах;</div>
	<div class="descr">&#9679; <b>модификация 3 нижних ссылок</b> до равномерного заполнения пространства текстами ссылок;</div>
	<div class="descr">&#9679; <b>нумерация страниц</b> (пагинатор) фиксирована внизу окна, постоянно на виду;</div>
	<div class="descr">&#9679; <b>компактный футер</b>, более чем вдвое по высоте;</div>
	<div class="descr">&#9679; <b>исправление ошибок сайта</b> в форматировании и отображении элементов страниц: ряд ошибок, случайно возникших и с неизвестным временем официального исправления, которые проще исправить в стилях;</div>
	<br>
	<div class="descr">&#9679; ... и ряд незначительных модификаций стилей.</div>
</div>

<div class="b-h3Block">
	<h3>На каких сайтах работают стили</h3>
</div>
<div class="b-h3Block">
	<div class="descr">&#9679; <a href="http://habrahabr.ru">Habrahabr</a>,</div>
	<div class="descr">&#9679; <a href="http://habrahabr.ru">Geektimes</a> (частичный официальный клон),</div>
	<div class="descr">&#9679; <a href="http://megamozg.ru">Megamozg</a> (частичный официальный клон для менеджерских, финансовых и организаторских статей),</div>
	<div class="descr">&#9679; <a href="http://tmfeed.ru">TMfeed</a> (объединённая лента, без авторизации, по 3 вышеперечисленным сайтам),</div>
	<div class="descr">&#9679; <a href="http://webcache.googleusercontent.com/search?q=cache:http://habrahabr.ru/">кеш Гугла</a> (для просмотра недавно удалённых статей),</div>
	<div class="descr">&#9679; <a href="http://h.ru">локальный сайт</a> под именем h.ru или haru/ (для разработчиков или для просмотра копий страниц).</div>
	&nbsp; &nbsp; <b>Использование кеша Гугла</b>: если статью недавно (до 2 недель назад) удалили с сайта - идём на <u>http://webcache.googleusercontent.com/search?q=cache:&lt;URL_этой_статьи></u>, и видим копию статьи, которую успел сохранить Гугл. Впрочем, скрипт <a href="http://spmbt.github.io/haPages/doc/habrAjax/">HabrAjax</a> сам подсказывает ссылку на странице "отбоя". И не только статью, но и оформление её с юзерстилями.<br>
	&nbsp; &nbsp; <b>Локальный сайт</b>: будет полезен для оффлайн-чтения страниц сайта (или для тестирования при разработке юзерскриптов/стилей). На своём компьютере для его просмотра нужно установить веб-сервер (например, Apache) и создать в нём виртуальный хост под именем <b>h.ru</b> или <b>haru/</b>, и в его образ класть сохранённые через браузер страницы (которые с папками *_files/ при них). Для этого домена будут работать ZenComment, HabrAjax и HabraDarkAge (на выбор). Одна особенность: если страницы сохраняются (Ctrl+S) через Firefox или Chrome, перед сохранением лучше отключить скрипты HabrAjax и стили ZenComment, чтобы не сохранились их последствия. Старая Опера сохраняет страницы "чисто" (без артефактов) всегда - с подключением стилей и скриптов или без подключения. И есть проблемы с показом веб-шрифтов - браузер их не сохраняет в копии страницы, а они имеются в главном меню. (Если поправить стили и вытащить шрифты из веба - показывать будут. <i>TODO nodeJS-скрипт для "доводки" копий и выделения общих скриптов и стилей из сохранённых страниц или полный "сейвер" страниц в формат JSON или HTML.</i>)<br>
</div>
<div class="b-h3Block">
	<h3>Причины появления ZenComment и история развития</h3>
</div>
<div class="b-h3Block">
	&nbsp; &nbsp; Сайт имел традицию содержать ряд багов оформления, которое постоянно менялось, но не достигало стабильного состояния. Существовали разные доработки на сайте юзерстилей для Хабра. На основе модификации стилей сайта от AlmAlexa на userscripts.org построены стили с собственными предпочтениями в плане компактности и экспериментов с внешним видом. Исторически, именно стили примерно в течение полугода дорабатывались, менялся дизайн, и только после них такая же системная работа продолжилась и со скриптами HabrAjax, которые в большой степени предполагали наличие юзерстилей ZenComment в браузере. (Возможность их отключения - опциональная и вызвана просьбами пользователей.) В результате, выполнялась поддержка (с 2011 года) 3 комбинаций стилей и скриптов (в скриптах часть стилей существовала и без подключения ZenComment) и ещё - одновременная поддержка до 5 браузеров в лучшие времена (Firefox, Chrome, Opera 11-12, Safari 5, IE 8-9), т.е. до 15 комбинаций программного окружения.<br>
	&nbsp; &nbsp; Периодически в стилях делались эксперименты по реализации представлений данных. Например, значительный чисто стилевой эксперимент - введение режима "Дзен" в просмотр комментариев, когда скрываются даже даты сообщений, и появляются по наведению мыши, к тому же, по-разному при наведении на 4 различных области болка комментариев. При этом, вокруг был серый фон, для концентрации на текстах. Впрочем, этот эксперимент показал сложность в работе с таким представление текстов, и далее за основу был принят менее компактный режим "Компакт" (авторы, даты и тексты), без 4 активных областей наведения мыши. Но кнопки ответов (те самые, которые стоят вертикально слева) появляются по наведению мыши, и только в верхних сообщениях.<br>

	<div class="b-h3Block">
		<h3>Поддержка ZenComment браузерами</h3>
	</div>
	<div class="b-h3Block">
		&nbsp; &nbsp; Сейчас сохраняется поддержка 3 браузеров (с Оперой). Safari/Mac потенциально возможно поддерживать. Некоторые особенности требовались для поддержки стилей в Linux (Firefox и Chrome). Однажды была обеспечена поддержка IceWeasel под Debian (на базе Firefox 3.6) - во времена, когда Firefox был версии примерно 21-й. Поддержка Firefox 3.6 никогда не игнорировалась (и в скриптах), но обращение к ней происходило со всё более редкой периодичностью.</div>

	<div class="b-h3Block">
		<h3>Дизайн ZenComment</h3>
	</div>
	<div class="b-h3Block">
		&nbsp; &nbsp; Основной упор стилей был и есть - на функциональность и эксперименты с юзабилити. Предложения пользователей по дизайну были, но не были ими доведены до результата, кроме одного проекта, о котором неизвестно, был ли опубликован (на userscripts не появлялся в топах).</div>

	<div class="b-h3Block">
		<h3>Варианты настроек стилей</h3>
	</div>
	<div class="b-h3Block">
		<div class="b-h3Block">
			&nbsp; &nbsp; В коде заложены переключатели, для переключения режимов "Компакт" и "Дзен", но второй режим давно не поддерживается, потерял актуальность. И второй переключатель - для более читабельных имён пользователей в случае работы без скриптов HabrAjax (скриптовым путём нельзя было обеспечить настройки из-за особенностей конкретной организации HTML).<br>
			&nbsp; &nbsp; Кроме того, блоки стилей в коде были относительно рассортированы, поэтому при желании можно было удалить ту или другую функцию. Но практики такой среди пользователей не наблюдалось, поэтому необходимости в полноценной поддержке модульности не было.</div>
	</div>

	<div class="b-h3Block">
		<h3>Новинки версий</h3>
	</div>
	<div class="b-h3Block">
		<div class="descr"><b>435</b> (2015-11-05) - учёт массы небольших изменений в вёрстке сайта за последние 1.5 месяца;</div>
		<div class="descr"><b>4.18</b> (2014-10-29) - расширена доступность сайтов (https); фильтр боковых блоков - с учётом Geektimes;</div>
		<div class="descr"><b>4.12</b> - Нормализовано верхнее меню (Geektimes и т.п.), подключён Geektimes; кнопки над полем вв.;</div>
		<div class="descr"><b>4.08-11</b> - 2-я вставка "Спецпр."; 10 авг 2014 - Малое "Моя лента"; #tab_print убран, ибо реклама;</div>
		<div class="descr"><b>4.07</b> (12 июня 2014) - показ меню для неавторизованных и непоказ лишних подменю "Спецпр.";</div>
		<div class="descr"><b>4.06</b> (31 мая) - учтена иерархия стилей для совместимости с новым ufocorrect.user.js (скриптом удаления длинных теней);</div>
		<div class="descr">4.03 - адаптивность меню к широким окнам более 1520 пикс: все 4 подменю на виду. <a href="../../doc/img/zenCommentWide.png">Скриншот</a>.</div>
		<div class="descr">20 мая - оформлено меню, появившееся 15 мая на сайте;</div>
		<div class="descr">4.00 (19 мая 2014) - после создания левого меню-бара: подправлены стили заголовков комментариев, убраны устаревшие стили вопросов-ответов. Преобразованиее меню-бара ожидается в ближайшей новой версии.</div>
		<div class="descr">3.07 (17 авг 2013) - настройки пользователя; 3.08 - top favorites tags;</div>
		<div>(Прежняя история содержит 40-50 дополнений за 2 года.) </div>
		<div class="descr">...</div>
	</div>
		<h3>Общие цели построения стилей</h3>
		<div class="b-h3Block">
		1. Идея раздельного пользования стилями и скриптом. Если есть желание проверить работу стаилей без их установки, включите настройку "встроенные стили ZenComment".<br>
		2. Идея компактности текстов. Много белого места разделяет блоки, но требует больше работы колесом мыши. Будем стремиться "Читать, а не скроллить!".<br>
		3. Отключения различных возможностей. Любые существенные возможности должны уметь отключаться (модульность). <br>
		</div>
		<h3>Лицензия / License</h3>
		<div class="b-h3Block">
			&nbsp; &nbsp; Код распространяется под <a href="http://creativecommons.org/licenses/by-nc/4.0/">лицензией CC-BY-NC v.4.0</a>, <img src="https://df6a.https.cdn.softlayer.net/80DF6A/static.userstyles.org/assets/cc/cc-by-nc-a707cb61cd0b45ffa849cf978c7a1ec9.png">, <a href="http://creativecommons.org/licenses/by-nc/4.0/deed.ru">на русском</a>, <a href="http://en.wikipedia.org/wiki/Creative_Commons_license">wiki</a>. Она призвана поддерживать распространение стилей показа интерфейсов. Основные возможности и следствия из лицензии:<br>
		* не ограничивает копирование и распространение в любом формате при условии <i>некоммерческого</i> использования;<br>
		* при копировании и модификации требуется указание авторства;<br>
		* дает права на:<br>
		.. пересборку, модификацию и использование в иных некоммерческих разработках;<br>
		* запрещает пользователю ограничивать эти права, пока для данного кода существуют условия лицензии<br>
		Подробнее все права и требования приведены в тексте лицензии. <a href="http://www.opennet.ru/opennews/art.shtml?num=38521">О версии 4.0</a>. <a href="http://creativecommons.ru/sites/creativecommons.ru/files/docs/attribution_3.0_ss_by-nc_rus.pdf">PDF v.3.0</a>
		</div>
	</div>
</div>
</div>
<br><br><br><br><br><br><br><br><br>
</body></html>
